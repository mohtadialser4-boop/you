<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>جمل مكتوبة حرف بحرف مع اختفاء</title>
<style>
body{
  margin:0;
  background:#030616;
  font-family:'Tajawal',sans-serif;
  color:white;
  height:100vh;
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
  perspective:1000px;
  padding:20px;
}
body::before{
  content:'';
  position:fixed;
  inset:0;
  background:
    radial-gradient(circle at 20% 30%, rgba(255,255,255,0.15) 0%, transparent 40%),
    radial-gradient(circle at 80% 80%, rgba(150,80,255,0.12) 0%, transparent 45%),
    url('https://assets.codepen.io/191814/space-stars.png');
  background-size:cover;
  opacity:0.55;
  z-index:-1;
}
.box{
  width:90%;
  max-width:600px;
  padding:20px;
  backdrop-filter:blur(5px);
  transform-style:preserve-3d;
}
.line{
  font-size:22px;
  margin-bottom:25px;
  opacity:0;
  transform:translateY(10px) translateZ(0px) rotateY(-15deg);
  white-space:pre-wrap;
  text-align:right;
  transition:opacity 0.8s ease;
}
.line.show{
  opacity:1;
  transform:translateY(0) translateZ(80px) rotateY(0deg);
  text-shadow:0 0 12px rgba(255,255,255,0.25);
}
.eng{
  font-size:14px;
  opacity:0.85;
  margin-top:5px;
  display:block;
}
.heart{
  position:fixed;
  top:-10px;
  font-size:20px;
  animation: fall 5s linear infinite;
  color:red;
}
@keyframes fall{
 0%{transform:translateY(0) scale(1);opacity:1;}
 100%{transform:translateY(100vh) scale(1.5);opacity:0;}
}
.cursor{
  display:inline-block;
  width:10px;
  height:22px;
  background:white;
  margin-left:5px;
  animation:blink 0.7s infinite;
}
@keyframes blink{50%{opacity:0}}
</style>
</head>
<body>
<div class="box" id="box"></div>
<audio id="bgMusic" loop>
  <source src="https://cdn.pixabay.com/audio/2022/03/15/audio_5e82c09062.mp3" type="audio/mpeg">
</audio>
<button class="music-btn" id="musicBtn" disabled></button>
<script>
const messages = [
  {ar:"كان الوقوع في حبك أسهل شئ قد فعلته", en:"Falling in love with you was the easiest thing I've ever done"},
  {ar:"لا يهمني شئ الا انتِ", en:"Nothing matters to me except you"},
  {ar:"وانا اعي هذا في كل يوم اعيشه", en:"And I realize this every single day I live"},
  {ar:"احببتك منذ اليوم الذي التقيتك فيه", en:"I loved you from the day I met you"},
  {ar:"أحبك اليوم و سأبقى أحبك بقية حياتي", en:"I love you today and I will keep loving you for the rest of my life"}
];

const box = document.getElementById('box');
const musicBtn = document.getElementById('musicBtn');
const bgMusic = document.getElementById('bgMusic');
let musicPlaying = false;
musicBtn.onclick = ()=>{ if(!musicPlaying){ bgMusic.play(); musicBtn.style.display='none'; musicPlaying=true; } };

async function typeTextWithFade(messages, container){
  for(let i=0;i<messages.length;i++){
    const div = document.createElement('div');
    div.className='line';
    const eng = document.createElement('span');
    eng.className='eng';
    eng.textContent = messages[i].en;
    div.appendChild(document.createElement('span'));
    container.appendChild(div);
    div.classList.add('show');

    const span = div.firstChild;
    const cursor = document.createElement('span');
    cursor.className='cursor';
    span.after(cursor);

    for(let c=0;c<messages[i].ar.length;c++){
      span.textContent += messages[i].ar[c];
      await new Promise(r=>setTimeout(r,45));
    }

    cursor.remove();
    div.appendChild(eng);

    // الانتظار قبل الاختفاء
    await new Promise(r=>setTimeout(r,1000));

    // إذا ليست الجملة الأخيرة، اخفِ الجملة الحالية
    if(i<messages.length-1){
      div.style.opacity=0;
      await new Promise(r=>setTimeout(r,800));
    }
  }
}

typeTextWithFade(messages, box);

// القلوب
function createHeart(){
  const h=document.createElement('div');
  h.className='heart'; h.textContent='❤';
  h.style.left=Math.random()*100+'vw';
  h.style.fontSize=(20+Math.random()*20)+'px';
  h.style.animationDuration=(3+Math.random()*4)+'s';
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),7000);
}
setInterval(createHeart,400);
</script>
</body>
</html>
